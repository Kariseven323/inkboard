# 砚记(Inkboard) - 敏捷开发计划与Sprint规划

## 1. 敏捷开发概述

### 1.1 敏捷开发原则
砚记项目遵循敏捷开发宣言的核心价值观：
- **个体和互动** 胜过流程和工具
- **工作的软件** 胜过详尽的文档
- **客户合作** 胜过合同谈判
- **响应变化** 胜过遵循计划

### 1.2 项目特点
- **团队规模**: 1人（个人项目）
- **开发周期**: 预计3个月（12周）
- **Sprint周期**: 2周一个Sprint，共6个Sprint
- **发布策略**: MVP → 增量发布 → 完整版本

### 1.3 成功定义
- 完成核心CRUD功能
- 实现Facebook风格UI设计
- 达到iOS原生动效体验
- 测试覆盖率 > 80%
- 应用性能指标达标

## 2. 项目时间线

### 2.1 整体时间线
```
周次    Sprint    目标                 状态
1-2     Sprint 1  项目基础设置         🔄 进行中
3-4     Sprint 2  核心数据层开发       📋 计划中
5-6     Sprint 3  基础UI和日记CRUD     📋 计划中
7-8     Sprint 4  搜索和标签功能       📋 计划中
9-10    Sprint 5  高级UI和动画效果     📋 计划中
11-12   Sprint 6  优化和发布准备       📋 计划中
```

### 2.2 里程碑
- **Week 2**: 项目架构完成
- **Week 4**: 数据层和业务逻辑完成
- **Week 6**: MVP版本完成
- **Week 8**: 功能增强版完成
- **Week 10**: UI和动画完成
- **Week 12**: 正式版本发布

## 3. Sprint详细规划

### 3.1 Sprint 1: 项目基础设置 (Week 1-2)
**Sprint目标**: 搭建项目基础架构，建立开发环境

#### 3.1.1 Story Points估算
总估算: 40 Story Points

#### 3.1.2 产品待办事项 (Product Backlog)

| ID | 用户故事 | 验收标准 | 估算(SP) | 优先级 |
|----|----------|----------|----------|--------|
| INK-001 | 作为开发者，我需要搭建Flutter项目基础架构 | 项目结构清晰，依赖配置完成 | 8 | High |
| INK-002 | 作为开发者，我需要配置代码质量工具 | Linting规则配置，代码格式化工具就绪 | 5 | High |
| INK-003 | 作为开发者，我需要建立依赖注入框架 | get_it + injectable配置完成 | 8 | High |
| INK-004 | 作为开发者，我需要配置状态管理 | Riverpod基础配置完成 | 5 | High |
| INK-005 | 作为开发者，我需要建立数据库基础 | drift数据库配置完成，基础表结构创建 | 8 | High |
| INK-006 | 作为开发者，我需要建立测试框架 | 单元测试、Widget测试、集成测试环境就绪 | 6 | Medium |

#### 3.1.3 Sprint待办事项 (Sprint Backlog)
- [x] 创建Flutter项目结构
- [x] 编写项目文档（PRD、架构设计等）
- [ ] 配置依赖注入框架
- [ ] 设置Riverpod状态管理
- [ ] 建立数据库schema
- [ ] 配置测试环境
- [ ] 设置CI/CD流水线（可选）

#### 3.1.4 Definition of Done
- [ ] 所有代码通过静态分析
- [ ] 单元测试覆盖率 > 90%
- [ ] 代码Review完成
- [ ] 文档更新完成
- [ ] 功能演示完成

### 3.2 Sprint 2: 核心数据层开发 (Week 3-4)
**Sprint目标**: 完成数据层和业务逻辑层开发

#### 3.2.1 产品待办事项

| ID | 用户故事 | 验收标准 | 估算(SP) | 优先级 |
|----|----------|----------|----------|--------|
| INK-007 | 作为开发者，我需要实现DiaryEntry实体和Repository | 完整的CRUD操作，包含测试 | 13 | High |
| INK-008 | 作为开发者，我需要实现Tag实体和Repository | 标签管理功能，包含测试 | 8 | High |
| INK-009 | 作为开发者，我需要实现搜索功能 | 全文搜索，支持标题和内容搜索 | 8 | High |
| INK-010 | 作为开发者，我需要实现数据加密 | 数据库加密，安全存储 | 5 | Medium |
| INK-011 | 作为开发者，我需要实现Use Cases | 所有业务逻辑用例，包含验证 | 8 | High |

#### 3.2.2 技术任务
- 数据库表结构实现
- Repository模式实现
- 数据模型和实体映射
- 业务逻辑用例开发
- 数据验证和错误处理
- 数据迁移策略

### 3.3 Sprint 3: 基础UI和日记CRUD (Week 5-6)
**Sprint目标**: 实现MVP版本的核心功能

#### 3.3.1 产品待办事项

| ID | 用户故事 | 验收标准 | 估算(SP) | 优先级 |
|----|----------|----------|----------|--------|
| INK-012 | 作为用户，我需要一个主页面来浏览日记列表 | 时间线式列表，基础卡片布局 | 13 | High |
| INK-013 | 作为用户，我需要创建新的日记 | 浮动按钮，Markdown编辑器 | 13 | High |
| INK-014 | 作为用户，我需要编辑已有的日记 | 编辑页面，实时预览 | 8 | High |
| INK-015 | 作为用户，我需要删除不需要的日记 | 滑动删除，确认对话框 | 5 | High |
| INK-016 | 作为用户，我需要应用主题系统 | 亮暗主题切换，Material 3 | 8 | Medium |

#### 3.3.2 UI组件开发
- 日记卡片组件
- Markdown编辑器组件
- 导航栏组件
- 通用对话框组件
- 加载和错误状态组件

### 3.4 Sprint 4: 搜索和标签功能 (Week 7-8)
**Sprint目标**: 增强用户体验，添加高级功能

#### 3.4.1 产品待办事项

| ID | 用户故事 | 验收标准 | 估算(SP) | 优先级 |
|----|----------|----------|----------|--------|
| INK-017 | 作为用户，我需要搜索日记内容 | 全局搜索，结果高亮 | 13 | High |
| INK-018 | 作为用户，我需要使用标签管理日记 | 标签创建、关联、筛选 | 13 | High |
| INK-019 | 作为用户，我需要收藏重要的日记 | 收藏功能，收藏列表 | 5 | Medium |
| INK-020 | 作为用户，我需要按日期筛选日记 | 日期选择器，时间范围筛选 | 8 | Medium |
| INK-021 | 作为用户，我需要导出日记数据 | Markdown格式导出 | 8 | Low |

### 3.5 Sprint 5: 高级UI和动画效果 (Week 9-10)
**Sprint目标**: 实现Facebook风格UI和iOS动效

#### 3.5.1 产品待办事项

| ID | 用户故事 | 验收标准 | 估算(SP) | 优先级 |
|----|----------|----------|----------|--------|
| INK-022 | 作为用户，我需要流畅的页面切换动画 | Hero动画，页面转场效果 | 13 | High |
| INK-023 | 作为用户，我需要优雅的列表动画 | 列表项动画，加载动画 | 8 | High |
| INK-024 | 作为用户，我需要Facebook风格的UI设计 | 卡片设计，色彩方案，圆角等 | 13 | High |
| INK-025 | 作为用户，我需要手势操作支持 | 滑动操作，长按菜单 | 8 | Medium |
| INK-026 | 作为用户，我需要触觉反馈 | 按钮点击，操作确认反馈 | 3 | Low |

#### 3.5.2 动画和交互
- 页面转场动画
- 列表滚动动画
- 按钮点击效果
- 加载状态动画
- 错误状态动画

### 3.6 Sprint 6: 优化和发布准备 (Week 11-12)
**Sprint目标**: 性能优化，测试完善，发布准备

#### 3.6.1 产品待办事项

| ID | 用户故事 | 验收标准 | 估算(SP) | 优先级 |
|----|----------|----------|----------|--------|
| INK-027 | 作为开发者，我需要优化应用性能 | 启动时间<3s，内存使用<100MB | 13 | High |
| INK-028 | 作为开发者，我需要完善测试覆盖 | 测试覆盖率>80%，关键路径100% | 13 | High |
| INK-029 | 作为用户，我需要应用设置页面 | 主题、字体、导出等设置 | 8 | Medium |
| INK-030 | 作为开发者，我需要应用图标和启动页 | 应用图标设计，启动页动画 | 5 | Medium |
| INK-031 | 作为开发者，我需要发布准备 | 应用签名，发布包生成 | 3 | High |

## 4. 敏捷实践

### 4.1 Daily Standup (每日站会)
由于是个人项目，建议每日进行自我检查：
- 昨天完成了什么？
- 今天计划做什么？
- 遇到什么阻碍？

### 4.2 Sprint Planning (Sprint计划会)
每个Sprint开始前：
1. 回顾上个Sprint的成果
2. 从Product Backlog选择本Sprint的Story
3. 将Story分解为具体任务
4. 估算工作量和时间

### 4.3 Sprint Review (Sprint评审)
每个Sprint结束时：
1. 演示完成的功能
2. 收集反馈
3. 更新Product Backlog

### 4.4 Sprint Retrospective (Sprint回顾)
每个Sprint结束后：
1. 分析什么做得好
2. 识别改进机会
3. 制定下个Sprint的改进计划

## 5. 风险管理

### 5.1 技术风险
| 风险 | 影响 | 概率 | 缓解策略 |
|------|------|------|----------|
| Flutter性能问题 | 高 | 中 | 早期原型验证，性能测试 |
| 第三方库兼容性 | 中 | 低 | 选择成熟稳定的库，有备选方案 |
| iOS动效实现难度 | 中 | 中 | 分阶段实现，先基础后高级 |

### 5.2 进度风险
| 风险 | 影响 | 概率 | 缓解策略 |
|------|------|------|----------|
| 功能复杂度超预期 | 高 | 中 | MVP优先，功能分阶段交付 |
| 时间估算不准确 | 中 | 高 | 基于历史数据调整，留缓冲时间 |
| 需求变更 | 中 | 低 | 明确需求优先级，控制范围 |

### 5.3 质量风险
| 风险 | 影响 | 概率 | 缓解策略 |
|------|------|------|----------|
| 测试覆盖率不足 | 高 | 中 | TDD开发，自动化测试 |
| 代码质量问题 | 中 | 低 | 代码规范，静态分析 |
| 性能不达标 | 高 | 低 | 持续性能监控，优化 |

## 6. 定义完成标准 (Definition of Done)

### 6.1 Feature级别DoD
- [ ] 功能实现符合验收标准
- [ ] 单元测试编写并通过
- [ ] Widget测试通过
- [ ] 代码Review完成
- [ ] 静态代码分析通过
- [ ] 文档更新完成

### 6.2 Sprint级别DoD
- [ ] 所有Story达到Feature级DoD
- [ ] 集成测试通过
- [ ] 性能测试通过
- [ ] 用户体验验收通过
- [ ] Sprint演示完成

### 6.3 Release级别DoD
- [ ] 所有功能测试通过
- [ ] 性能指标达标
- [ ] 安全测试通过
- [ ] 发布包构建成功
- [ ] 发布文档完成

## 7. 估算和计划

### 7.1 Story Point估算基准
- **1 SP**: 简单配置或小修改（1-2小时）
- **3 SP**: 简单功能实现（半天）
- **5 SP**: 中等复杂度功能（1天）
- **8 SP**: 复杂功能（2天）
- **13 SP**: 非常复杂功能（3-4天）
- **21 SP**: 需要分解的大功能

### 7.2 团队速度 (Velocity)
基于个人项目的估算：
- **每日可用时间**: 4小时
- **每Sprint可用时间**: 56小时（14天 × 4小时）
- **预期速度**: 35-40 Story Points per Sprint

### 7.3 燃尽图跟踪
每个Sprint维护燃尽图，跟踪：
- 剩余Story Points
- 理想燃尽线
- 实际进度线
- 风险预警

## 8. 工具和环境

### 8.1 开发工具
- **IDE**: VS Code + Flutter扩展
- **版本控制**: Git + GitHub
- **项目管理**: GitHub Issues + Projects
- **文档**: Markdown + GitHub Wiki

### 8.2 测试工具
- **单元测试**: flutter_test
- **集成测试**: integration_test
- **代码覆盖**: lcov
- **性能测试**: Flutter Inspector

### 8.3 CI/CD
- **持续集成**: GitHub Actions
- **代码质量**: dart analyze + flutter_lints
- **自动测试**: 每次提交触发
- **发布构建**: 标签触发发布包构建

---

**文档版本**: v1.0
**创建日期**: 2025-09-22
**最后更新**: 2025-09-22
**作者**: 成东杰